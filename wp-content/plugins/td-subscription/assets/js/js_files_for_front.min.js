var tdsLeads={};
(function(){tdsLeads={items:[],init:function(){tdsLeads.items=[]},item:function(){this.jqueryObj=this.blockUid=void 0;this.submitHasErrors=this.isSubmit=this.inComposer=!1;this.messages={ack_require:"Acknowledgment is required!"};this._is_initialized=!1},_initialize_item:function(a){!0!==a._is_initialized&&(a.jqueryObj.find(".tds-submit-btn").on("click",function(c){var d=jQuery(this).data("url"),f=a.jqueryObj.find(".tds-checkbox"),b=a.jqueryObj.find(".tds-messages-error"),g=!1;f.length&&(f=a.jqueryObj.find("#pp_checkbox_"+
a.blockUid),f.length&&!f.is(":checked")&&(c.preventDefault(),g=!0,b.length?b.find(".tds-message-checkbox").length||b.append('<div class="tds-message tds-message-checkbox">'+a.messages.ack_require+"</div>"):a.jqueryObj.find(".tds-info").prepend('<div class="tds-messages tds-messages-error"><div class="tds-message tds-message-checkbox">'+a.messages.ack_require+"</div></div>"),setTimeout(function(){var b=jQuery("."+a.blockUid+" .tds-messages");b.length&&(b.addClass("tds-messages-hiding"),setTimeout(function(){b.remove()},
300))},3E3)));g||"undefined"===typeof d||(c.preventDefault(),window.location.replace(d))}),a.jqueryObj.find("#pp_checkbox_"+a.blockUid).change(function(){var c=jQuery(this),d=a.jqueryObj.find(".tds-messages-error"),f=d.find(".tds-message-checkbox");c.is(":checked")&&(f.remove(),d.is(":empty")&&d.remove())}),a._is_initialized=!0)},addItem:function(a){if("undefined"===typeof a.blockUid)throw"item.blockUid is not defined";tdsLeads.items.push(a);tdsLeads._initialize_item(a)},deleteItem:function(a){for(var c=
0;c<tdsLeads.items.length;c++)if(tdsLeads.items[c].blockUid===a)return tdsLeads.items.splice(c,1),!0;return!1}}})();jQuery().ready(function(){tdsLeads.init()});var tdsStore;
(function(a,c,d){tdsStore={_db:d,_dbName:d,_dbStoreName:d,_indexedDB:d,_isInitialized:!1,init:function(a,b){tdsStore._isInitialized||(tdsStore._indexedDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,tdsStore._indexedDB?(tdsStore._dbName=a,tdsStore._dbStoreName=b):console.log("Your browser doesn't support a stable version of IndexedDB!"),tdsStore._isInitialized=!0)},openDb:function(){if(tdsStore._isInitialized){var a=tdsStore._indexedDB.open(tdsStore._dbName);a.onsuccess=
function(b){tdsStore._db=this.result};a.onupgradeneeded=function(b){b.currentTarget.result.createObjectStore(tdsStore._dbStoreName,{keyPath:"id"})}}},getObjectStore:function(a,b){if(tdsStore._isInitialized)return tdsStore._db.transaction(a,b).objectStore(a)},add:function(a,b){if(tdsStore._isInitialized){a={id:a,content:b};b=tdsStore.getObjectStore(tdsStore._dbStoreName,"readwrite");try{var g=b.put(a)}catch(e){throw console.log(e.name),e;}g.onsuccess=function(b){};g.onerror=function(){}}},get:function(c){var b=
a.Deferred(),g=tdsStore.getObjectStore(tdsStore._dbStoreName,"readwrite");try{var e=g.get(c)}catch(h){throw console.log(h.name),h;}e.onsuccess=function(a){b.resolve(this)};e.onerror=function(){};return b}};tdsStore.init("Leads","Cache");tdsStore.openDb()})(jQuery,_);var tdsMain={};
(function(){tdsMain={init:function(){jQuery("body").on("click",".tds-choose-plan-type",function(b){b.preventDefault();b=jQuery(this);var a=b.data("type");"undefined"!==typeof a&&(b=b.data("url-"+a),"undefined"!==typeof b&&(window.location=b))}).on("click",".tds-switcher",function(){tdsMain.setActivePlan(jQuery(this).val())}).on("click",".tds-choose-plan-type-free",function(b){b.preventDefault();b=jQuery(this);var a=b.data("type");"undefined"!==typeof a&&(b=b.data("url-"+a),"undefined"!==typeof b&&
(window.location=b))}).on("click",".tds-s-table-col-expand",function(b){var a=jQuery(this);b=a.find(".tds-s-table-col-label");a=a.closest(".tds-s-table-row");var e=a.next(".tds-s-table-row-extra-wrap");a.length&&e.length&&(b.text("Show more info"===b.text()?"Show less info":"Show more info"),a.toggleClass("tds-s-table-row-active tds-s-table-row-info-expanded"),e.toggle())}).on("click",".tds-resend-activation-link",function(a){var b=jQuery(this),e=b.siblings(".tds-s-notif-descr"),c=b.siblings(".tds-s-notif-js").text();
a=b.data("user");"undefined"!==typeof a&&(b.addClass("tds-s-btn-saving"),jQuery.ajax({type:"POST",url:td_ajax_url,data:{action:"td_resend_subscription_activation_link",user:a},success:function(a,g,d){a=jQuery.parseJSON(a);switch(a[0]){case "resend_activation_link":b.next(".tds-info").show().html(a[2]),1===a[1]?(b.addClass("tds-s-btn-saved"),e.text(c)):b.removeClass("tds-s-btn-saving")}},error:function(a,b,e){}}))});var a=jQuery(".tds-paypal-button");if(a.length){var c=a.closest(".tds-s-table-row").data("subscription-id");
paypal.Buttons({fundingSource:paypal.FUNDING.PAYPAL,createOrder:function(b,c){return c.order.create({purchase_units:[{amount:{value:a.data("value"),currency:a.data("currency")}}],application_context:{shipping_preference:"NO_SHIPPING"}})},onApprove:function(b,d){return d.order.capture().then(function(b){a.hide();jQuery.ajax({timeout:1E4,type:"POST",url:tdsMain.get_rest_endpoint("tds_subscription/update_paypal_subscription","uuid="+tdsMain.get_unique_id()),beforeSend:function(b){b.setRequestHeader("X-WP-Nonce",
window.tds_js_globals.wpRestNonce)},cache:!1,dataType:"json",data:{subscriptionId:c,paypalOrderId:b.id,paypalOrderIntent:b.intent,paypalOrderStatus:b.status,paypalOrderPayerId:b.payer.payer_id,paypalOrderPayerGivenName:b.payer.name.given_name,paypalOrderPayerSurname:b.payer.name.surname,paypalOrderPayerEmail:b.payer.email_address,paypalOrderPayeeId:b.purchase_units[0].payee.merchant_id,paypalOrderPayeeEmail:b.purchase_units[0].payee.email_address,paypalOrderAmountCurrencyCode:b.purchase_units[0].amount.currency_code,
paypalOrderAmountValue:b.purchase_units[0].amount.value,paypalOrderInfo:JSON.stringify(b,null,2),paypalOrderCreateTime:b.create_time,paypalOrderUpdateTime:b.update_time,paypalOrderCaptureCreateTime:b.purchase_units[0].payments.captures[0].create_time,paypalOrderCaptureUpdateTime:b.purchase_units[0].payments.captures[0].update_time},success:function(b,a,c){console.log(b);"undefined"!==typeof b.error?console.log(b.error):"undefined"!==typeof b.success&&window.location.reload()},error:function(b,a,c){console.log("tds save settings - Error callback - textStatus: "+
a+" errorThrown: "+c)}})})}}).render(".tds-paypal-button")}var d=jQuery(".tds-switcher:checked"),f="year";d.length&&(f=d.val());tdsMain.setActivePlan(f);"undefined"!==typeof tdLogin&&(jQuery("#tds_forgot_button").on("click",function(){var b=jQuery("#tds_forgot_email");b.length&&(b=b.val().trim(),tdLogin.email_pattern.test(b)?(tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-error"]),tdLogin.addRemoveClass([".td_display_err",1,"tds-s-notif-success"]),tdLogin.showHideMsg(window.td_please_wait),
tdLogin.doCustomAction("td_mod_remember_pass",b,"","")):(tdLogin.addRemoveClass([".td_display_err",1,"tds-s-notif-error"]),tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-success"]),tdLogin.showHideMsg(window.td_email_incorrect)))}),jQuery("#tds_register_button").on("click",function(b){b.preventDefault();var a=jQuery("#tds_register_email"),c=jQuery("#tds_register_user"),d=jQuery("#tds_register_pass");b=jQuery("#tds_register_retype_pass");a.length&&c.length&&d.length&&b.length&&(a=a.val().trim(),
c=c.val().trim(),d=d.val().trim(),b=b.val().trim(),tdLogin.email_pattern.test(a)?c?d?tdLogin.pass_pattern.test(d)?d!==b?(tdLogin.addRemoveClass([".td_display_err",1,"tds-s-notif-error"]),tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-success"]),tdLogin.showHideMsg(window.td_retype_pass_incorrect)):tdLogin.doCustomAction("td_mod_subscription_register",a,c,d,b):(tdLogin.addRemoveClass([".td_display_err",1,"tds-s-notif-error"]),tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-success"]),
tdLogin.showHideMsg(window.td_pass_pattern_incorrect)):(tdLogin.addRemoveClass([".td_display_err",1,"tds-s-notif-error"]),tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-success"]),tdLogin.showHideMsg(window.td_pass_empty)):(tdLogin.addRemoveClass([".td_display_err",1,"tds-s-notif-error"]),tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-success"]),tdLogin.showHideMsg(window.td_user_incorrect)):(tdLogin.addRemoveClass([".td_display_err",1,"tds-s-notif-error"]),tdLogin.addRemoveClass([".td_display_err",
0,"tds-s-notif-success"]),tdLogin.showHideMsg(window.td_email_incorrect)))}),jQuery("#tds_login_button").on("click",function(b){b.preventDefault();var a=jQuery("#tds_login_email");b=jQuery("#tds_login_pass");a.length&&b.length&&(a=a.val().trim(),b=b.val().trim(),a?b?(tdLogin.doCustomAction("td_mod_login",a,"",b),tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-error"])):(tdLogin.showHideMsg(window.td_pass_empty),tdLogin.addRemoveClass([".td_display_err",1,"tds-s-notif-error"])):(tdLogin.showHideMsg(window.td_email_user_empty),
tdLogin.addRemoveClass([".td_display_err",1,"tds-s-notif-error"])),tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-success"]))}))},get_rest_endpoint:function(a,c){return _.isEmpty(window.tds_js_globals.permalinkStructure)?window.tds_js_globals.wpRestUrl+a+"&"+c:window.tds_js_globals.wpRestUrl+a+"?"+c},get_unique_id:function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},setActivePlan:function(a){var c=
jQuery(".tds-choose-plan-type").not(".tds-switcher-change"),d=jQuery(".tds_plans_price, .tds_plans_description");c.each(function(c,b){c=jQuery(b);c.data("type",a);"undefined"===typeof c.data("url-"+a)?c.attr("disabled",!0):c.removeAttr("disabled")});d.each(function(c,b){c=jQuery(b);b=c.data("type-from-block");var d=c.find('[class*="tds-show-plan-"]'),e=c.find(".tds-plan-placeholder"),f=a,k=!1;"undefined"!==typeof b&&""!==b&&"free"!==b&&(f=b);d.length?(d.each(function(a,b){a=jQuery(b);b=a.data("type");
"undefined"!==typeof b&&b===f?(a.hasClass("tds-show-plan-visible")||a.addClass("tds-show-plan-visible"),window.location!==window.parent.location&&e.hasClass("tds-plan-placeholder-visible")&&e.removeClass("tds-plan-placeholder-visible"),k=!0):a.removeClass("tds-show-plan-visible")}),!1===k&&window.location!==window.parent.location&&(e.hasClass("tds-plan-placeholder-visible")||e.addClass("tds-plan-placeholder-visible"))):"free"!==b&&(window.location!==window.parent.location?e.hasClass("tds-plan-placeholder-visible")||
e.addClass("tds-plan-placeholder-visible"):c.remove())})},b64EncodeUnicode:function(a){return btoa(encodeURIComponent(a).replace(/%([0-9A-F]{2})/g,function(a,d){return String.fromCharCode("0x"+d)}))},b64DecodeUnicode:function(a){return decodeURIComponent(atob(a).split("").map(function(a){return"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)}).join(""))},setStorageItem:function(a,c){tdsStore.add(a,c)},getStorageItem:function(a){return tdsStore.get(a)},setLocalStorageItem:function(a,c){var d=tdsMain._getStorage();
d=null===d?{}:JSON.parse(tdsMain.b64DecodeUnicode(d));d[a]=c;tdsMain._setStorage(tdsMain.b64EncodeUnicode(JSON.stringify(d)))},getLocalStorageItem:function(a){var c=tdsMain._getStorage();if(null!==c)try{if(c=JSON.parse(tdsMain.b64DecodeUnicode(c)),c.hasOwnProperty(a))return c[a]}catch(d){}},clearItem:function(){},_getStorage:function(){return window.localStorage.getItem(window.tdcAdminSettings.themeName)},_setStorage:function(a){window.localStorage.setItem(window.tdcAdminSettings.themeName,a)}}})();
jQuery().ready(function(){tdsMain.init()});
